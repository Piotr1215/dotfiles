# ~/.config/tmuxinator/infra-staging.yml

name: infra-staging
root: <%= ENV['HOME'] %>/loft/clusters/infra-staging

pre_window: export KUBECONFIG=<%= ENV['HOME'] %>/loft/clusters/infra-staging/config

windows:
  - main:
      layout: main-vertical
      panes:
        - main:
          - if ! aws sts get-caller-identity &>/dev/null; then aws sso login; fi && aws eks update-kubeconfig --name vcluster-staging --region us-east-2 --kubeconfig ./config
  - infrastructure:
      root: <%= ENV['HOME'] %>/loft/hosted-platform/infrastructure
