# Config-driven parser definitions for bindings help
# Each section defines how to extract bindings from a config file

base_dirs = ["~/dev/dotfiles"]

[tmux]
paths = [".tmux.conf"]
match_line = "^bind(?!.*-T)"
regex = 'bind(?:-key)?\s+(?:-n\s+)?(\S+)(.*)'
key_group = 1
desc_group = 2
type = "tmux"
truncate = 100

[tmux-copy]
paths = [".tmux.conf"]
match_line = "-T copy-mode"
regex = 'bind(?:-key)?\s+-T\s+\S+\s+(\S+)(.*)'
key_group = 1
desc_group = 2
type = "tmux-copy"
truncate = 100

[zsh-bindkey]
paths = [".zshrc"]
match_line = "bindkey"
skip_comment = true
regex = "bindkey\\s+(?:-s\\s+)?['\"]([^'\"]+)['\"]"
key_group = 1
# desc from trailing comment or function name
desc_from_comment = true
type = "bind"

[alias]
paths = [".zsh_aliases", ".zsh_claude"]
regex = "alias\\s+(?:-[gs]\\s+)?([^=]+)=(.*)"
key_group = 1
desc_group = 2
type = "alias"
truncate = 100
strip_quotes = true

[abbrev]
paths = [".zsh_abbreviations"]
# Special handling: parse abbrevs=() block
mode = "abbrev_block"
type = "abbr"

[function]
paths = [".zsh_functions"]
regex = '(?:function\s+)?(\w+)\s*\(\)\s*\{?'
skip_comment = true
key_group = 1
desc_literal = "(function)"
type = "func"

[nvim-utils]
paths = [".config/nvim/lua/**/*.lua"]
match_line = "utils\\."
regex = 'utils\.\w+map\("([^"]+)",\s*"[^"]+",.*desc\s*=\s*"([^"]+)"'
key_group = 1
desc_group = 2
type = "nvim"

[nvim-keymap]
paths = [".config/nvim/lua/**/*.lua"]
match_line = "vim.keymap.set"
regex = 'vim\.keymap\.set\([^,]+,\s*"([^"]+)".*desc\s*=\s*"([^"]+)"'
key_group = 1
desc_group = 2
type = "nvim"
