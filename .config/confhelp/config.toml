# Config-driven parser definitions for bindings help
# Each section defines how to extract bindings from a config file

base_dirs = ["~/dev/dotfiles"]
query_engines = ["nvim"]  # Enable runtime query engines (requires nvim binary)

[tmux]
paths = [".tmux.conf"]
match_line = "^bind(?!.*-T)"
regex = 'bind(?:-key)?\s+(?:-n\s+)?(\S+)(.*)'
key_group = 1
desc_group = 2
type = "tmux"
truncate = 100

[tmux-copy]
paths = [".tmux.conf"]
match_line = "-T copy-mode"
regex = 'bind(?:-key)?\s+-T\s+\S+\s+(\S+)(.*)'
key_group = 1
desc_group = 2
type = "tmux-copy"
truncate = 100

[zsh-bindkey]
paths = [".zshrc"]
match_line = "bindkey"
skip_comment = true
regex = "bindkey\\s+(?:-s\\s+)?['\"]([^'\"]+)['\"]"
key_group = 1
# desc from trailing comment or function name
desc_from_comment = true
type = "zsh"

[alias]
paths = [".zsh_aliases", ".zsh_claude"]
regex = "alias\\s+(?:-[gs]\\s+)?([^=]+)=(.*)"
key_group = 1
desc_group = 2
type = "alias"
truncate = 100
strip_quotes = true

[abbrev]
paths = [".zsh_abbreviations"]
match_line = '".*"'
regex = '''"([^"]+)"\s+'([^']+)''''
key_group = 1
desc_group = 2
type = "abbr"

[function]
paths = [".zsh_functions"]
regex = '(?:function\s+)?(\w+)\s*\(\)\s*\{?'
skip_comment = true
key_group = 1
desc_literal = "(function)"
type = "func"

[engine.nvim]
truncate = 60

[bookmarks]
paths = ["scripts/__bookmarks.conf"]
regex = '^([^;]+);(.+)$'
key_group = 1
desc_group = 2
type = "bookmark"
open_target = true  # --edit opens the path (desc) instead of source file

[autokey]
paths = ["scripts/__autokey_bindings.conf"]
regex = '^([^|]+)\|(.+)$'
key_group = 1
desc_group = 2
type = "autokey"
